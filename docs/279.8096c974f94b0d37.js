"use strict";(self.webpackChunkkontrolwork22=self.webpackChunkkontrolwork22||[]).push([[279],{8279:(j,p,c)=>{c.r(p),c.d(p,{ProductsModule:()=>Y});var s=c(6895),i=c(646),a=c(727),t=c(8256),d=c(773);let m=(()=>{class u{constructor(){this.textLength=100}transform(e){return e.length>this.textLength?e.slice(0,this.textLength)+"...":e}}return u.\u0275fac=function(e){return new(e||u)},u.\u0275pipe=t.Yjl({name:"short",type:u,pure:!0}),u})();const f=function(u){return["/product",u]};let g=(()=>{class u{constructor(e){this.productService=e,this.product={id:0,image:"",title:"",price:0,description:""}}ngOnInit(){}}return u.\u0275fac=function(e){return new(e||u)(t.Y36(d.M))},u.\u0275cmp=t.Xpm({type:u,selectors:[["product-card-component"]],inputs:{product:"product"},decls:14,vars:9,consts:[[1,"card","h-100"],["alt","\u0424\u043e\u0442\u043e",1,"w-100",3,"src"],[1,"card-body","py-3","px-4","d-flex","flex-column","align-items-start"],[1,"card-title","mb-3","fw-bold","fs-5","w-100","text-center"],[1,"card-text","mb-4"],[1,"fw-bold","mb-2"],[1,"btn","btn-primary","px-4","mt-auto",3,"routerLink"],[1,"px-3"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div"),t._UZ(2,"img",1),t.qZA(),t.TgZ(3,"div",2)(4,"h5",3),t._uU(5),t.qZA(),t.TgZ(6,"p",4),t._uU(7),t.ALo(8,"short"),t.qZA(),t.TgZ(9,"div",5),t._uU(10),t.qZA(),t.TgZ(11,"a",6)(12,"span",7),t._uU(13,"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"),t.qZA()()()()),2&e&&(t.xp6(2),t.s9C("src",o.product.image,t.LSH),t.xp6(3),t.Oqu(o.product.title),t.xp6(2),t.Oqu(t.lcZ(8,5,o.product.description)),t.xp6(3),t.hij("\u0426\u0435\u043d\u0430: ",o.product.price," \u0440\u0443\u0431."),t.xp6(1),t.Q6J("routerLink",t.VKq(7,f,o.product.id)))},dependencies:[i.yS,m]}),u})();function h(u,r){1&u&&(t.TgZ(0,"p",8),t._uU(1,"\u041d\u0430\u0448\u0438 \u0447\u0430\u0439\u043d\u044b\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438"),t.qZA())}function v(u,r){if(1&u&&(t.TgZ(0,"p",8),t._uU(1),t.qZA()),2&u){const e=t.oxw();t.xp6(1),t.hij("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ",e.filterParam,"")}}function b(u,r){1&u&&t._UZ(0,"product-card-component",9),2&u&&t.Q6J("product",r.$implicit)}function x(u,r){1&u&&(t.TgZ(0,"div",10),t._uU(1,"\u0422\u043e\u0432\u0430\u0440\u043e\u0432 \u043f\u043e \u0412\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),t.qZA())}function C(u,r){1&u&&(t.TgZ(0,"div",11),t._UZ(1,"span",12),t.qZA())}let Z=(()=>{class u{constructor(e,o,n){this.productService=e,this.router=o,this.activatedRoute=n,this.products=[],this.loaderShow=!1,this.filter=!1,this.filterParam="",this.subscription$=new a.w0}ngOnInit(){this.subscription$.add(this.productService.filterSubject$.subscribe(e=>{this.loaderShow=!0,this.filterParam=e||"",this.subscription$.add(this.productService.getProducts(this.filterParam).subscribe({next:o=>{this.products=o,this.productService.products=o,this.loaderShow=!1,this.filter=!!this.filterParam},error:o=>{console.log(o),this.loaderShow=!1,this.router.navigate(["/"]).then()}}))})),this.subscription$.add(this.activatedRoute.queryParams.subscribe(e=>{e.search?(this.filterParam=e.search,this.productService.filterSubject$.next(this.filterParam)):this.productService.filterSubject$.next(null)}))}ngOnDestroy(){this.subscription$.unsubscribe()}}return u.\u0275fac=function(e){return new(e||u)(t.Y36(d.M),t.Y36(i.F0),t.Y36(i.gz))},u.\u0275cmp=t.Xpm({type:u,selectors:[["catalog-component"]],decls:9,vars:5,consts:[[1,"container"],[1,"row","mb-sm-5","mb-3"],[1,"col"],["class","h2 text-center fw-bold",4,"ngIf"],[1,"row","row-gap-3","justify-content-center","mb-5"],["class","col col-lg-4 col-md-6 col-sm-6 col-12",3,"product",4,"ngFor","ngForOf"],["class","h3 text-danger text-center",4,"ngIf"],["class","loader-bg",4,"ngIf"],[1,"h2","text-center","fw-bold"],[1,"col","col-lg-4","col-md-6","col-sm-6","col-12",3,"product"],[1,"h3","text-danger","text-center"],[1,"loader-bg"],[1,"loader"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,h,2,0,"p",3),t.YNc(4,v,2,1,"p",3),t.qZA()(),t.TgZ(5,"div",4),t.YNc(6,b,1,1,"product-card-component",5),t.YNc(7,x,2,0,"div",6),t.qZA()(),t.YNc(8,C,2,0,"div",7)),2&e&&(t.xp6(3),t.Q6J("ngIf",!o.filter),t.xp6(1),t.Q6J("ngIf",o.filter),t.xp6(2),t.Q6J("ngForOf",o.products),t.xp6(1),t.Q6J("ngIf",0===o.products.length&&o.filter),t.xp6(1),t.Q6J("ngIf",o.loaderShow))},dependencies:[s.sg,s.O5,g]}),u})();var P=c(62);function _(u,r){if(1&u&&t._UZ(0,"img",18),2&u){const e=t.oxw(2);t.s9C("src",e.product.image,t.LSH)}}function T(u,r){1&u&&t._UZ(0,"img",19)}const A=function(){return["/order"]};function S(u,r){if(1&u){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),t._uU(5),t.qZA(),t.TgZ(6,"div",6)(7,"div",7)(8,"span",8),t._uU(9),t.qZA()()()()()(),t.TgZ(10,"div",9)(11,"div",10)(12,"div",11),t._uU(13),t.qZA(),t.TgZ(14,"div",12)(15,"a",13),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.selectProduct())}),t.TgZ(16,"span",14),t._uU(17,"\u041a\u0443\u043f\u0438\u0442\u044c"),t.qZA()()()(),t.TgZ(18,"div",15),t.YNc(19,_,1,1,"img",16),t.YNc(20,T,1,0,"img",17),t.qZA()()()}if(2&u){const e=t.oxw();t.xp6(5),t.hij(" ",e.product.title," "),t.xp6(4),t.hij(" \u0426\u0435\u043d\u0430: ",e.product.price," \u0440\u0443\u0431."),t.xp6(4),t.hij(" ",e.product.description," "),t.xp6(2),t.Q6J("routerLink",t.DdM(6,A)),t.xp6(4),t.Q6J("ngIf",e.product.image),t.xp6(1),t.Q6J("ngIf",!e.product.image)}}const w=function(){return["/catalog"]};function y(u,r){1&u&&(t.TgZ(0,"div",1)(1,"div",20),t._uU(2," \u041f\u0440\u043e\u0434\u0443\u043a\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d! "),t.qZA(),t.TgZ(3,"div",21)(4,"a",22)(5,"span",14),t._uU(6,"\u0412 \u043a\u0430\u0442\u0430\u043b\u043e\u0433"),t.qZA()()()()),2&u&&(t.xp6(4),t.Q6J("routerLink",t.DdM(1,w)))}const E=[{path:"catalog",component:Z},{path:"product/:id",component:(()=>{class u{constructor(e,o,n,l){this.activatedRoute=e,this.productService=o,this.commonService=n,this.router=l,this.product={id:0,image:"",title:"",price:0,description:""},this.subscribe=null,this.subscribeRequest=null}ngOnInit(){this.subscribe=this.activatedRoute.params.subscribe(e=>{if(e.id){let o;0===this.productService.products.length?this.subscribeRequest=this.productService.getProducts().subscribe({next:n=>{o=n.find(l=>l.id===+e.id),o&&(this.product=o)},error:n=>{this.router.navigate(["/"])}}):(o=this.productService.getProduct(+e.id),o&&(this.product=o))}else this.router.navigate([""])})}ngOnDestroy(){this.subscribe?.unsubscribe(),this.subscribeRequest?.unsubscribe()}selectProduct(){this.commonService.product=this.product.title}}return u.\u0275fac=function(e){return new(e||u)(t.Y36(i.gz),t.Y36(d.M),t.Y36(P.v),t.Y36(i.F0))},u.\u0275cmp=t.Xpm({type:u,selectors:[["product-component"]],decls:2,vars:2,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row","mt-4"],[1,"col","col-12","col-md-7"],[1,"row","justify-content-between"],[1,"col","h2","col-12","col-sm-8"],[1,"col","col-12","col-sm-4","col-md-2","d-flex","align-items-sm-center","align-items-end","justify-content-end","mt-2","mt-sm-0"],[1,"fw-bold","badge","bg-secondary"],[1,"h5","m-0"],[1,"row","justify-content-center"],[1,"col"],[1,"product-descriotion","pt-2","pt-sm-3"],[1,"d-flex","justify-content-around","align-items-center","mt-3"],[1,"btn","btn-primary","px-4","mt-auto",3,"routerLink","click"],[1,"px-3"],[1,"col","col-11","col-md-5","col-sm-9","d-flex","align-items-center","justify-content-center","rounded-circle","overflow-hidden","float-end","order-first","order-md-1"],["class","tea-image w-100 rounded-circle ","alt","\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0447\u0430\u044f",3,"src",4,"ngIf"],["class","rounded-circle","src","../../../../assets/images/imagePlaceholder.png","alt","\u0424\u043e\u0442\u043e \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442",4,"ngIf"],["alt","\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0447\u0430\u044f",1,"tea-image","w-100","rounded-circle",3,"src"],["src","../../../../assets/images/imagePlaceholder.png","alt","\u0424\u043e\u0442\u043e \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442",1,"rounded-circle"],[1,"h2","text-center","my-5","py-5"],[1,"text-center","mb-5","pb-5"],[1,"btn","btn-danger","px-4","mt-auto",3,"routerLink"]],template:function(e,o){1&e&&(t.YNc(0,S,21,7,"div",0),t.YNc(1,y,7,2,"div",0)),2&e&&(t.Q6J("ngIf",o.product.id),t.xp6(1),t.Q6J("ngIf",!o.product.id))},dependencies:[s.O5,i.yS]}),u})()}];let F=(()=>{class u{}return u.\u0275fac=function(e){return new(e||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[i.Bz.forChild(E),i.Bz]}),u})();var U=c(4466);let Y=(()=>{class u{}return u.\u0275fac=function(e){return new(e||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[s.ez,U.m,i.Bz,F]}),u})()}}]);